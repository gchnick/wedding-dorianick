---
import type { HTMLTag, Polymorphic } from "astro/types";

type Props<Tag extends HTMLTag> = Polymorphic<{
  as: Tag;
  variant: keyof typeof variantClasses;
  color?: keyof typeof colorClasses;
  fontWeight?: keyof typeof fontWeightClasses;
}>;

const {
  as: Tag,
  class: className,
  variant,
  color,
  fontWeight,
  ...props
} = Astro.props;

const variantClasses = {
  display: "text-[2rem]/[120%] sm:text-[3rem]/[120%] md:text-[4rem]/[120%]",
  h1: "sm:text-[1.875rem]/[120%] md:text-[3.5rem]/[120%]",
  h2: "sm:text-[1.75rem]/[120%] md:text-5xl/[120%]",
  h3: "sm:text-[1.625rem]/[120%] md:text-[2.5rem]/[120%]",
  h4: "sm:text-[1.5rem]/[120%] md:text-[2rem]/[120%]",
  subtitle1: "sm:text-[1.375rem]/[140%] md:text-[1.75rem]/[140%]",
  subtitle2: "sm:text-[1.25rem]/[140%] md:text-2xl/[140%]",
  lead: "sm:text-[1.125rem]/[140%] md:text-xl/[140%]",
  bodyLarge: "sm:text-[1rem]/[140%] md:text-lg/[140%]",
  bodySmall: "sm:text-[0.875rem]/[140%] md:text-base/[140%]",
  small: "sm:text-[0.75rem]/[140%] md:text-sm/[140%]",
  tiny: "sm:text-[0.6875rem]/[140%] md:text-xs/[140%]",
};

const fontWeightClasses = {
  normal: "font-normal",
  semiBold: "font-semibold",
  bold: "font-bold",
};

const colorClasses = {
  primary: "text-primary-500",
  primaryHeading: "text-primary-800",
  primaryParagraph: "text-primary-700",
  primaryLight: "text-primary-100",
  secondary: "text-secondary-500",
  greyHeading: "text-grey-800",
  greyParagraph: "text-grey-700",
  white: "text-white",
  neutral: "text-neutral-300",
  dark: "text-neutral-dark",
};

const classes = [
  variantClasses[variant as keyof typeof variantClasses],
  colorClasses[color as keyof typeof colorClasses],
  fontWeightClasses[fontWeight as keyof typeof fontWeightClasses] ||
    fontWeightClasses.normal,
  className,
];
---

<Tag class:list={classes} {...props}>
  <slot />
</Tag>
<style>
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-display);
    font-weight: 600;
    text-wrap: balance;
  }

  p {
    font-family: var(--font-body);
    text-wrap: pretty;
    font-weight: 400;
    /* margin-block: 1lh; */
  }
</style>
