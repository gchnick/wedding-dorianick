---
import { weddingDate, weddingDateStringWithDay } from "@/constans/const";
import Anchor from "@/components/Anchor.astro";
import { Countdown } from "@/components/Countdown";
import LiveStreamIcon from "@/assets/icons/live-stream.svg";

const isEventStarted = Date.now() >= weddingDate.getTime();

import Paragraph from "@/components/Paragraph.astro";
import Title from "@/components/Title.astro";
---

<Anchor id="live-stream" />
<section class="py-20 bg-neutral-900 text-white">
  <div class="container mx-auto px-4 max-w-4xl text-center">
    <div class="inline-block p-4 rounded-full bg-white/10 mb-8 animate-pulse">
      <LiveStreamIcon aria-label="Icono de trasmisión en vivo" />
    </div>

    <Title dark>Transmisión en vivo</Title>

    <Paragraph dark>
      Si no puedes acompañarnos físicamente, nos encantaría que fueras parte de
      nuestro gran día de manera virtual.
    </Paragraph>

    <div
      class="bg-white/5 border border-white/10 rounded-xl p-8 mb-12 backdrop-blur-sm"
    >
      <div class="grid md:grid-cols-3 gap-8 text-center items-center">
        <div>
          <span
            class="font-body block text-sm text-neutral-400 uppercase tracking-wider mb-2"
            >Fecha</span
          >
          <span class="font-body text-xl">{weddingDateStringWithDay}</span>
        </div>
        <div>
          <span
            class="font-body block text-sm text-neutral-400 uppercase tracking-wider mb-2"
            >Hora</span
          >
          {/* Hora de Venezuela */}
          <span class="font-body text-xl">4:00 PM</span>
        </div>
        <div>
          <span
            class="font-body block text-sm text-neutral-400 uppercase tracking-wider mb-2"
            >Plataforma</span
          >
          <span class="font-body text-xl">Zoom</span>
        </div>
      </div>
    </div>

    {
      isEventStarted ? (
        <div class="flex flex-col items-center gap-4 animate-fade-in">
          <a
            href="https://jworg.zoom.us/j/82173062672?pwd=ZQOlZj4M41HYraQ8cvO9rJVOVNuPBq.1"
            class="inline-block bg-primary-accent text-neutral-dark font-bold py-4 px-10 rounded-lg shadow-lg hover:bg-white transition-colors duration-300 transform hover:-translate-y-1"
          >
            Unirse a la Transmisión
          </a>

          <div class="mt-4 text-sm text-neutral-400">
            <p>
              ID de reunión:{" "}
              <span class="text-white font-mono">821 7306 2672</span>
            </p>
            <p>
              Código de acceso: <span class="text-white font-mono">256875</span>
            </p>
          </div>
        </div>
      ) : (
        <div class="flex flex-col items-center justify-center gap-8 py-8">
          <p class="text-neutral-300 max-w-lg mx-auto">
            Los datos de conexión estarán disponibles aquí cuando comience el
            evento.
          </p>
          <Countdown
            client:load
            targetDate={weddingDate}
            title="La transmisión comienza en"
          />
        </div>
      )
    }
  </div>
</section>
